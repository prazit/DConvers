
# Data Conversion
# Converter file contains source, values and target.

#------------------------


# branch with address
source=branch
source.branch.datasource=push
source.branch.id=id
source.branch.query=select b.*, TRIM(a.addr1) as village_no, TRIM(a.addr2) as road, TRIM(a.addr3) as village, a.email, a.faxno, a.mobileno, a.postcode, a.telno from branch b, address a where b.address_id = a.id and b.activeflag = 1 order by b.branchcode


# branch_config (need to import table branch_config from goldspot_alpha into goldspot_push before use this source, see /converter/import-into-pushdb.sql)
source=branch_config
source.branch_config.datasource=push
source.branch_config.id=id
source.branch_config.query=select b.id * 1000 + c.id as id, b.branchcode, b.id as branch_id, c.config_name, c.turn_on from branch b, branch_config c where b.activeflag = 1 order by b.branchcode, c.config_name


#------------------------

# Values Mapping
#values=status
#values.status.value=

#------------------------

# 26 columns from table 'branch'
target=branch
target.branch.index=1
target.branch.source=branch
target.branch.table=branch
target.branch.id=id
target.branch.create=false
target.branch.insert=true
target.branch.rownumber=2
#target.branch.output=branch.sql
target.branch.id=id
target.branch.column.id=VAR:ROWNUMBER
#target.taget-name.column.column-name=source-column
#possible values for source-column is following
#   SRC:source-name.column-name       // the target mapping file need to define as a source with the standard mapping table name such as 'branch_to_branch_address'
#   TAR:target-name.column-name       // the target 'target-name' must be use the same source with this target, because of dconvers will use mapping table between TAR:target-name and target.target-name.source
#   source-column-name
#   source-column-name>>SRC:source-name.column-name>>column-name     // mapping source-colume-name with SRC:source-name.column-name and get value from >>column-name
#   source-column-name>>TAR:target-name.column-name>>column-name     // mapping source-colume-name with TAR:target-name.column-name and get value from >>column-name
#   source-column-name>>MAP:mapping-name.column-name>>column-name    // mapping source-colume-name with MAP:mapping-name.column-name and get value from >>column-name
#   VAR:system-variable-name
#   INT:integer-value
#   DEC:decimal-value
#   STR:string-value
#   DTE:date-value
#   DTT:date-time-value
target.branch.column.active=INT:1
target.branch.column.modify_date=modifydate
target.branch.column.version=INT:0
target.branch.column.code=branchcode
target.branch.column.complete_flag=INT:1
target.branch.column.domain=domain
target.branch.column.effective_date=opendate
target.branch.column.email=email
target.branch.column.email_encode_file_name=STR:NULL
target.branch.column.email_password=STR:NULL
target.branch.column.email_sender_name=STR:NULL
target.branch.column.email_server_ip=STR:NULL
target.branch.column.email_server_port=STR:NULL
target.branch.column.email_smtp_auth=STR:NULL
target.branch.column.email_smtp_starttls=STR:NULL
target.branch.column.email_transport_protocol=STR:NULL
target.branch.column.email_user_name=STR:NULL
target.branch.column.end_date=closedate
target.branch.column.name_en=ebranchname
target.branch.column.name_th=tbranchname
target.branch.column.step_progress=STR:COMPLETE
target.branch.column.system_used=INT:0
target.branch.column.use_global_product_config=INT:1
target.branch.column.use_gmail_config=INT:0
target.branch.column.modify_by=user_id


# 16 columns from table 'branch_address'
target=branch_address
target.branch_address.index=2
target.branch_address.source=branch
target.branch_address.table=branch_address
target.branch_address.create=false
target.branch_address.insert=true
#target.branch_address.rownumber=1
#target.branch_address.output=branch_address.sql
target.branch_address.id=id
target.branch_address.column.id=VAR:ROWNUMBER
target.branch_address.column.branch_id=TAR:branch.id
target.branch_address.column.address_type=STR:CURRENT_ADDR
target.branch_address.column.fax=faxno
target.branch_address.column.is_mailing_address=INT:1
target.branch_address.column.mobile=mobileno
target.branch_address.column.number=telno
target.branch_address.column.tel=telno
target.branch_address.column.village_no=village_no
target.branch_address.column.village=village
target.branch_address.column.road=road
target.branch_address.column.sub_district=STR:NULL
target.branch_address.column.district=STR:NULL
target.branch_address.column.province=STR:NULL
target.branch_address.column.country=STR:NULL
target.branch_address.column.postcode=postcode


# 8 columns from table 'branch_config'
target=branch_config
target.branch_config.index=3
target.branch_config.source=branch_config
target.branch_config.table=branch_config
target.branch_config.create=false
target.branch_config.insert=true
#target.branch_config.rownumber=1
#target.branch_config.output=branch_config.sql
target.branch_config.id=id
target.branch_config.column.id=VAR:ROWNUMBER
target.branch_config.column.branch_id=id>>MAP:branch_to_branch.source_id>>target_id
target.branch_config.column.active=INT:1
target.branch_config.column.modify_date=VAR:NOW
target.branch_config.column.version=INT:0
target.branch_config.column.config_name=config_name
target.branch_config.column.turn_on=turn_on
target.branch_config.column.modify_by=INT:1


# EOF