
include=sample-generate-converters.conf

#-------converter-------

converter.index=1

#-------sources-------


# branch with address
source=branch
source.branch.datasource=push
source.branch.id=id
source.branch.query=$[TXT:sample-sql.sql]

source.branch.sql=false
source.branch.sql.append=true
source.branch.sql.insert=true

source.branch.markdown=true
source.branch.markdown.output=auto/create/dir/branch.md
source.branch.markdown.append=false

#source.branch.markdown.sftp=rebex
source.branch.markdown.sftp.output=test.md


source.branch.txt=false
source.branch.txt.append=true
source.branch.txt.separator=|
source.branch.txt.format=INT:5,INT:2,DTT:14,STR:3,STR:40,STR:40,INT:1,DTE:10,STR:40,STR:40,DTE:10,INT:1,INT:1,INT:1,INT:1,INT:5,INT:5,INT:5,INT:5,INT:5,INT:5,INT:5,INT:5,INT:5,INT:5,INT:5,INT:5,INT:5,INT:5,STR:20,STR:20,STR:20,STR:20,STR:20,STR:20,STR:20,STR:20
source.branch.txt.format.date=ddMMYYYY
source.branch.txt.format.datetime=YYYYMMddHHmmss


source.branch.csv=true
source.branch.csv.append=false
source.branch.csv.header=true
source.branch.csv.separator=\t
#source.branch.csv.format.integer=#,##0
#source.branch.csv.format.decimal=#,##0.00
#source.branch.csv.format.datetime=dd/MM/YYYY HH:mm:ss
#source.branch.csv.format.string=


# mardown source
source=markdown
source.markdown.datasource=markdown
source.markdown.id=id
source.markdown.query=C:/Users/prazi/Documents/GitHub/Data Conversion/out/target/dynamic/27072016/branch_txt.md

source.markdown.csv=true
source.markdown.csv.output=auto/create/dir/markdown.csv
source.markdown.csv.header=true
source.markdown.csv.separator=\t

source.markdown.markdown=true
source.markdown.markdown.output=auto/create/dir/branch_txt.md


# branch from push that already in alpha
#source=branch_alpha
source.branch_alpha.datasource=alpha
source.branch_alpha.id=id
source.branch_alpha.query=select * from branch where id in ($[SRC:branch.id])
source.branch_alpha.sql=false
source.branch_alpha.sql.append=false
source.branch_alpha.sql.create=false
source.branch_alpha.sql.insert=false
source.branch_alpha.markdown=true


# branch_config (need to import table branch_config from goldspot_alpha into goldspot_push before use this source, see /converter/import-into-pushdb.sql)
#source=branch_config
source.branch_config.datasource=push
source.branch_config.id=compute_id
source.branch_config.query=select b.id * 1000 + c.id as compute_id, b.branchcode, b.id, c.config_name, c.turn_on from branch b, branch_config c where b.activeflag = 1 order by b.branchcode, c.config_name
source.branch_config.create=false
source.branch_config.insert=true
source.branch_config.markdown=true


# email INBOX
#source=inbox
source.inbox.datasource=GMailServer
source.inbox.id=id
#source.inbox.query=mailbox:searchInSubject:scanLimit:resultLimit
source.inbox.query=inbox:1234567890:100:1
source.inbox.create=false
source.inbox.insert=false
source.inbox.markdown=true


# email Sent Box
#source=sent
source.sent.datasource=hMailServer
source.sent.id=id
source.sent.query=Sent Items
source.sent.create=false
source.sent.insert=false
source.sent.markdown=true


#-------targets-------


# test Fixed Length
target=branch_txt
target.branch_txt.index=1
target.branch_txt.source=branch
target.branch_txt.id=id

target.branch_txt.column.id=VAR:ROW_NUMBER
target.branch_txt.column.file_id=INT:1
target.branch_txt.column.seq_no=VAR:ROW_NUMBER

target.branch_txt.column.activeflag=activeflag
target.branch_txt.column.modifydate=modifydate
target.branch_txt.column.branchcode=branchcode
target.branch_txt.column.ebranchname=ebranchname
target.branch_txt.column.tbranchname=tbranchname
target.branch_txt.column.branchtype=branchtype
target.branch_txt.column.closedate=closedate
target.branch_txt.column.domain=domain
target.branch_txt.column.juristicperson=juristicperson
target.branch_txt.column.opendate=opendate
target.branch_txt.column.placeorder=placeorder
target.branch_txt.column.pushorder=pushorder
target.branch_txt.column.premiumauto=premiumauto
target.branch_txt.column.realtimeprice=realtimeprice
target.branch_txt.column.user_id=user_id
target.branch_txt.column.account_id=account_id
target.branch_txt.column.address_id=address_id
target.branch_txt.column.agent=agent
target.branch_txt.column.branch=branch
target.branch_txt.column.menu=menu
target.branch_txt.column.slip=slip
target.branch_txt.column.pre_print=pre_print
target.branch_txt.column.dw_cash_stock=dw_cash_stock
target.branch_txt.column.automatch=automatch
target.branch_txt.column.automatch_silver=automatch_silver
target.branch_txt.column.sendemailtrade=sendemailtrade
target.branch_txt.column.match_clear_port=match_clear_port
target.branch_txt.column.net_position=net_position
target.branch_txt.column.village_no=village_no
target.branch_txt.column.road=road
target.branch_txt.column.village=village
target.branch_txt.column.email=email
target.branch_txt.column.faxno=faxno
target.branch_txt.column.mobileno=mobileno
target.branch_txt.column.postcode=postcode
target.branch_txt.column.telno=telno

target.branch_txt.transform=rowcount(row_count:4,SRC:branch)
target.branch_txt.transform=sum(sum_branch_34:5,SRC:branch,current,1-2,7)
target.branch_txt.transform=fixedlength(formatted_data:6,INT:0,INT:0,INT:0,INT:5,INT:5,INT:5,DTT:14,STR:3,STR:40,STR:40,INT:1,DTE:10,STR:40,STR:40,DTE:10,INT:1,INT:1,INT:1,INT:1,INT:5,INT:5,INT:5,INT:5,INT:5,INT:5,INT:5,INT:5,INT:5,INT:5,INT:5,INT:5,INT:5,INT:5,STR:20,STR:20,STR:20,STR:20,STR:20,STR:20,STR:20,STR:20)
target.branch_txt.transform.fixedlength.format.date=ddMMYYYY
target.branch_txt.transform.fixedlength.format.datetime=YYYYMMddHHmmss
target.branch_txt.transform=remove(7-999)
#target.branch_txt.transform.fixedlength.separator=,

target.branch_txt.markdown=true
target.branch_txt.markdown.output=dynamic/$[CAL:format(SRC:branch,1,3,ddMMYYYY)]/branch_txt.md

target.branch_txt.sql=true
target.branch_txt.sql.table=TFSDWH_DETAIL
target.branch_txt.sql.quotes.value='
target.branch_txt.sql.update=true
target.branch_txt.sql.post=COMMIT;

target.branch_txt.dbinsert=false
target.branch_txt.dbinsert.datasource=sqlstaging
target.branch_txt.dbinsert.table=TFSDWH_DETAIL
target.branch_txt.dbinsert.quotes.value='

target.branch_txt.dbupdate=false
target.branch_txt.dbupdate.datasource=sqlstaging
target.branch_txt.dbupdate.table=TFSDWH_DETAIL
target.branch_txt.dbupdate.quotes.value='



# 26 columns from table 'branch'
#target=branch
target.branch.index=1
target.branch.source=branch
target.branch.table=branch
target.branch.id=id

target.branch.sql=true
target.branch.sql.append=false
target.branch.sql.create=false
target.branch.sql.insert=true

target.branch.markdown=true
target.branch.markdown.append=false

target.branch.csv=false
target.branch.csv.append=false
target.branch.csv.separator=|

target.branch.txt=true
target.branch.txt.append=false
target.branch.txt.separator=|
target.branch.txt.format=STR:1,DEC:19.5,STR:50,DTE:8,INT:3

target.branch.mapping.sql=true
target.branch.mapping.sql.append=false
target.branch.mapping.sql.create=false
target.branch.mapping.sql.insert=true

target.branch.mapping.markdown=true
target.branch.mapping.markdown.append=false

target.branch.mapping.csv=false
target.branch.mapping.csv.append=false
target.branch.mapping.csv.separator=|

target.branch.mapping.txt=true
target.branch.mapping.txt.append=false
target.branch.mapping.txt.separator=,
target.branch.mapping.txt.format=STR:1,DEC:19.5,STR:50,DTE:8,INT:3

target.branch.rownumber=2
#target.branch.output=branch.sql
target.branch.id=id
target.branch.column.id=VAR:ROW_NUMBER
target.branch.column.active=INT:1
target.branch.column.modify_date=VAR:NOW
target.branch.column.version=INT:0
target.branch.column.code=branchcode
target.branch.column.complete_flag=INT:1
target.branch.column.domain=domain
target.branch.column.effective_date=opendate
target.branch.column.email=email
target.branch.column.email_encode_file_name=STR:NULL
target.branch.column.email_password=STR:NULL
target.branch.column.email_sender_name=STR:NULL
target.branch.column.email_server_ip=STR:NULL
target.branch.column.email_server_port=STR:NULL
target.branch.column.email_smtp_auth=STR:NULL
target.branch.column.email_smtp_starttls=STR:NULL
target.branch.column.email_transport_protocol=STR:NULL
target.branch.column.email_user_name=STR:NULL
target.branch.column.end_date=closedate
target.branch.column.name_en=ebranchname
target.branch.column.name_th=tbranchname
target.branch.column.step_progress=STR:COMPLETE
target.branch.column.system_used=INT:0
target.branch.column.use_global_product_config=INT:1
target.branch.column.use_gmail_config=INT:0
target.branch.column.modify_by=user_id


# 16 columns from table 'branch_address'
#target=branch_address
target.branch_address.index=2
target.branch_address.source=branch
target.branch_address.table=branch_address
target.branch_address.create=false
target.branch_address.insert=true
#target.branch_address.rownumber=1
#target.branch_address.output=branch_address.sql
target.branch_address.id=id
target.branch_address.column.id=VAR:ROW_NUMBER
target.branch_address.column.branch_id=id>>MAP:branch_to_branch.source_id>>target_id
target.branch_address.column.address_type=STR:CURRENT_ADDR
target.branch_address.column.fax=faxno
target.branch_address.column.is_mailing_address=INT:1
target.branch_address.column.mobile=mobileno
target.branch_address.column.number=telno
target.branch_address.column.tel=telno
target.branch_address.column.village_no=village_no
target.branch_address.column.village=village
target.branch_address.column.road=road
target.branch_address.column.sub_district=STR:NULL
target.branch_address.column.district=STR:NULL
target.branch_address.column.province=STR:NULL
target.branch_address.column.country=STR:NULL
target.branch_address.column.postcode=postcode


# 8 columns from table 'branch_config'
#target=branch_config
target.branch_config.index=3
target.branch_config.source=branch_config
target.branch_config.table=branch_config
target.branch_config.create=false
target.branch_config.insert=true
#target.branch_config.rownumber=1
#target.branch_config.output=branch_config.sql
target.branch_config.id=id
target.branch_config.column.id=VAR:ROW_NUMBER
target.branch_config.column.branch_id=id>>MAP:branch_to_branch.source_id>>target_id
target.branch_config.column.active=INT:1
target.branch_config.column.modify_date=VAR:NOW
target.branch_config.column.version=INT:0
target.branch_config.column.config_name=config_name
target.branch_config.column.turn_on=turn_on
target.branch_config.column.modify_by=INT:1


# EOF